language: node_js
node_js:
  - 14.17.2

services:
  - docker

script:
  - docker-compose up
  - docker cp ~/node/keys bettery_app:~/app/

deploy:
  - provider: codedeploy
    application: bettery_dev_app
    deployment_group: bettery_dev_deployment_group
    access_key_id: $AWSAccessKeyId
    secret_access_key: $AWSSecretKey
    region: ap-southeast-1b
    on:
      branch: validate-tokens

